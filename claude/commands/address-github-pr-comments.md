Please read the PR review comments for the PR associated with this Git branch.
Follow these steps:

1. Use `gh pr view --comments` to get the comments on the PR.
2. Understand the issues raised in the comments.
3. Search the codebase for relevant files
4. Implement the necessary changes to address each comment in turn.
5. Write and run tests to verify the fix (if needed).
6. Ensure code builds, tests pass, and code is formatted.

Only address a single comment a time, and prompt for the next comment after completing each one.

Remember to use the GitHub CLI (`gh`) for all GitHub-related tasks.
